{% extends 'base.html.j2' %}

{% block title %}
Battle
{% endblock %}

{% block css %}
    <link rel="stylesheet" href="{{url_for('static',filename='css/battle.css')}}">
{% endblock %}

{% block content %}
    <div class="header row">
        <div class="col-md-4" id="defender">
        <h3>{{defender.first_name}} {{defender.last_name}}</h3>
        </div>

        <div class="col-md-4">
        <h2><i>VS</i></h2>
        </div>

        <div class="col-md-4" id="attacker">
        <h3>{{current_user.first_name}} {{current_user.last_name}}</h3>
        </div>

    </div> 

    {# {% set current_id_min = 9000000 %}
    {% set opponent = None %}
    {% for poke in defender.pokemon %}
        {% if poke.id < current_id_min %}
            {% set current_id_min = poke.id %}
        {% endif %}
    {% endfor %}

    {% set opponent = Pokemon.query.get(current_id_min) %} #}
    
  
    

    
    <div class="fighter row">
        <div class="col-md-6">
        {% if opponent %}
        <img src="{{opponent.url}}" id="" class="img-fluid rounded-start" alt="avatar" style="height:30vw;">
        {% endif %}
        </div>


        <div class="col-md-6">
        {% if fighter %}
        <img src="{{fighter.url}}" id="poke_img" class="img-fluid rounded-start" alt="avatar" style="height:30vw;">
        {% endif %}
        </div>
    </div>
  

    <div class="poke_deck">
        <div class="" id="attacker_deck">
            {% for poke in current_user.pokemon %}
                {% if poke.user_id==current_user.id %}
                    {# {% if poke.id!=dead_poke.id %} #}
                    <div id="defender_poke">
                        <form method="POST" action="{{url_for('social.battle', def_id = defender.id, fighter_id = poke.id)}}">
                            <button type="submit">
                            <img src="{{poke.url}}" id="poke_img" class="img-fluid rounded-start" alt="avatar" style="height:8vw;">
                            </button>
                        </form>

                    </div>
                    {# {% else %}
                    <div id="defender_poke">
                        <img src="{{poke.url}}" id="poke_img" class="img-fluid rounded-start" alt="avatar" style="height:8vw;transform:rotate(180deg);">
                            

                    </div>
                    {% endif %} #}
                {% endif %}
            {% endfor %}
        </div>

        <div class="" id="defender_deck">
            {% for poke in defender.pokemon %}
                {% if poke.user_id==defender.id %}

                    {# {% if poke.id!=dead_poke.id %} #}
                    <div id="defender_poke">
                        <form method="POST" class="disabled">
                            <button type="disabled"  class="disabled" style="background-color:rgb(158, 24, 0);">
                            <img src="{{poke.url}}" id="poke_img" class="img-fluid rounded-start" alt="avatar" style="height:8vw;">
                            </button>
                        </form>

                    </div>
                    {# {% else %}
                    <div id="defender_poke">
                        <img src="{{poke.url}}" id="poke_img" class="img-fluid rounded-start" alt="avatar" style="height:8vw;transform:rotate(180deg);">
                            

                    </div>
                    {% endif %} #}

                {% endif %}
            {% endfor %}
        </div>

    </div>





{% endblock %}
